<!DOCTYPE html>
<meta charset="utf-8">
<body>
<svg width="960" height="960"></svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>

var svgContainer = d3.select("svg");
var centerGroup = svgContainer.append('g')
							  .attr('transform', 'translate(500,200)');
var temperatureGroup = centerGroup.append('g');
// var lowTempArcs = svgContainer.append('g')
// 							 .attr('transform', 'translate(150,50)');
// var highTempArcs = svgContainer.append('g')
// 							 .attr('transform', 'translate(150,50)');








d3.csv("history_export_berlin-2018-08-15.csv", function(data) {
  return {
    windSpeed : +data["Wind Speed daily mean [10 m above gnd]"],
	windDir: +data["Wind Direction daily mean [10 m above gnd]"],
    meanTempr: +data['Temperature daily mean [2 m above gnd]']
  };
}, function(procData) {
  procData.forEach(generateLinesTemprclrs);
});

var lines = centerGroup.append('g');			


var center_clr = centerGroup.append('circle')
							.attr('r', 30)
							.style('fill', '#444');

var center_text = centerGroup.append('text')
							.attr('text-anchor', 'middle')
							.attr('alignment-baseline', 'middle')
							.attr('fill', 'orange')
							.text(function() {
							 return 'berlin';
							});


function generateLinesTemprclrs(d){
  var line = lines.append('line')
					  .attr('x1', 0) // center circle outer ring
					  .attr('y1', 0)
					  .attr('x2', d.windSpeed*10) // line length?? connecting centers or what we can see?
					  .attr('y2', 0)
					  .attr('stroke', '#444')
					  .attr('stroke-width', '1px')
					  .attr('transform', 'rotate('+ d.windDir +')');
  var low_temp_arc  = d3.arc()
                        .startAngle(0.5*Math.PI)
                        .endAngle(1.5*Math.PI)
                        .innerRadius(0)
                        .outerRadius(10);
  var high_temp_arc = d3.arc()
                        .startAngle(-0.5*Math.PI)
                        .endAngle(0.5*Math.PI)
                        .innerRadius(0)
                        .outerRadius(10);
  var one_tempr_clr = centerGroup.append('g')
                                 .attr('transform','translate('+ d.windSpeed*10 +')')
  one_tempr_clr.append("path").attr("d", low_temp_arc)
						 .attr('fill', '#44a');
  one_tempr_clr.append("path").attr("d", high_temp_arc)
						 .attr('fill', '#a44');                            
  
  }


</script>
</body>
